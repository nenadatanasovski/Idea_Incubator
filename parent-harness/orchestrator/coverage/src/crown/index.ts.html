
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/crown/index.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../index.html">All files</a> / <a href="index.html">src/crown</a> index.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/313</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/313</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a>
<a name='L366'></a><a href='#L366'>366</a>
<a name='L367'></a><a href='#L367'>367</a>
<a name='L368'></a><a href='#L368'>368</a>
<a name='L369'></a><a href='#L369'>369</a>
<a name='L370'></a><a href='#L370'>370</a>
<a name='L371'></a><a href='#L371'>371</a>
<a name='L372'></a><a href='#L372'>372</a>
<a name='L373'></a><a href='#L373'>373</a>
<a name='L374'></a><a href='#L374'>374</a>
<a name='L375'></a><a href='#L375'>375</a>
<a name='L376'></a><a href='#L376'>376</a>
<a name='L377'></a><a href='#L377'>377</a>
<a name='L378'></a><a href='#L378'>378</a>
<a name='L379'></a><a href='#L379'>379</a>
<a name='L380'></a><a href='#L380'>380</a>
<a name='L381'></a><a href='#L381'>381</a>
<a name='L382'></a><a href='#L382'>382</a>
<a name='L383'></a><a href='#L383'>383</a>
<a name='L384'></a><a href='#L384'>384</a>
<a name='L385'></a><a href='#L385'>385</a>
<a name='L386'></a><a href='#L386'>386</a>
<a name='L387'></a><a href='#L387'>387</a>
<a name='L388'></a><a href='#L388'>388</a>
<a name='L389'></a><a href='#L389'>389</a>
<a name='L390'></a><a href='#L390'>390</a>
<a name='L391'></a><a href='#L391'>391</a>
<a name='L392'></a><a href='#L392'>392</a>
<a name='L393'></a><a href='#L393'>393</a>
<a name='L394'></a><a href='#L394'>394</a>
<a name='L395'></a><a href='#L395'>395</a>
<a name='L396'></a><a href='#L396'>396</a>
<a name='L397'></a><a href='#L397'>397</a>
<a name='L398'></a><a href='#L398'>398</a>
<a name='L399'></a><a href='#L399'>399</a>
<a name='L400'></a><a href='#L400'>400</a>
<a name='L401'></a><a href='#L401'>401</a>
<a name='L402'></a><a href='#L402'>402</a>
<a name='L403'></a><a href='#L403'>403</a>
<a name='L404'></a><a href='#L404'>404</a>
<a name='L405'></a><a href='#L405'>405</a>
<a name='L406'></a><a href='#L406'>406</a>
<a name='L407'></a><a href='#L407'>407</a>
<a name='L408'></a><a href='#L408'>408</a>
<a name='L409'></a><a href='#L409'>409</a>
<a name='L410'></a><a href='#L410'>410</a>
<a name='L411'></a><a href='#L411'>411</a>
<a name='L412'></a><a href='#L412'>412</a>
<a name='L413'></a><a href='#L413'>413</a>
<a name='L414'></a><a href='#L414'>414</a>
<a name='L415'></a><a href='#L415'>415</a>
<a name='L416'></a><a href='#L416'>416</a>
<a name='L417'></a><a href='#L417'>417</a>
<a name='L418'></a><a href='#L418'>418</a>
<a name='L419'></a><a href='#L419'>419</a>
<a name='L420'></a><a href='#L420'>420</a>
<a name='L421'></a><a href='#L421'>421</a>
<a name='L422'></a><a href='#L422'>422</a>
<a name='L423'></a><a href='#L423'>423</a>
<a name='L424'></a><a href='#L424'>424</a>
<a name='L425'></a><a href='#L425'>425</a>
<a name='L426'></a><a href='#L426'>426</a>
<a name='L427'></a><a href='#L427'>427</a>
<a name='L428'></a><a href='#L428'>428</a>
<a name='L429'></a><a href='#L429'>429</a>
<a name='L430'></a><a href='#L430'>430</a>
<a name='L431'></a><a href='#L431'>431</a>
<a name='L432'></a><a href='#L432'>432</a>
<a name='L433'></a><a href='#L433'>433</a>
<a name='L434'></a><a href='#L434'>434</a>
<a name='L435'></a><a href='#L435'>435</a>
<a name='L436'></a><a href='#L436'>436</a>
<a name='L437'></a><a href='#L437'>437</a>
<a name='L438'></a><a href='#L438'>438</a>
<a name='L439'></a><a href='#L439'>439</a>
<a name='L440'></a><a href='#L440'>440</a>
<a name='L441'></a><a href='#L441'>441</a>
<a name='L442'></a><a href='#L442'>442</a>
<a name='L443'></a><a href='#L443'>443</a>
<a name='L444'></a><a href='#L444'>444</a>
<a name='L445'></a><a href='#L445'>445</a>
<a name='L446'></a><a href='#L446'>446</a>
<a name='L447'></a><a href='#L447'>447</a>
<a name='L448'></a><a href='#L448'>448</a>
<a name='L449'></a><a href='#L449'>449</a>
<a name='L450'></a><a href='#L450'>450</a>
<a name='L451'></a><a href='#L451'>451</a>
<a name='L452'></a><a href='#L452'>452</a>
<a name='L453'></a><a href='#L453'>453</a>
<a name='L454'></a><a href='#L454'>454</a>
<a name='L455'></a><a href='#L455'>455</a>
<a name='L456'></a><a href='#L456'>456</a>
<a name='L457'></a><a href='#L457'>457</a>
<a name='L458'></a><a href='#L458'>458</a>
<a name='L459'></a><a href='#L459'>459</a>
<a name='L460'></a><a href='#L460'>460</a>
<a name='L461'></a><a href='#L461'>461</a>
<a name='L462'></a><a href='#L462'>462</a>
<a name='L463'></a><a href='#L463'>463</a>
<a name='L464'></a><a href='#L464'>464</a>
<a name='L465'></a><a href='#L465'>465</a>
<a name='L466'></a><a href='#L466'>466</a>
<a name='L467'></a><a href='#L467'>467</a>
<a name='L468'></a><a href='#L468'>468</a>
<a name='L469'></a><a href='#L469'>469</a>
<a name='L470'></a><a href='#L470'>470</a>
<a name='L471'></a><a href='#L471'>471</a>
<a name='L472'></a><a href='#L472'>472</a>
<a name='L473'></a><a href='#L473'>473</a>
<a name='L474'></a><a href='#L474'>474</a>
<a name='L475'></a><a href='#L475'>475</a>
<a name='L476'></a><a href='#L476'>476</a>
<a name='L477'></a><a href='#L477'>477</a>
<a name='L478'></a><a href='#L478'>478</a>
<a name='L479'></a><a href='#L479'>479</a>
<a name='L480'></a><a href='#L480'>480</a>
<a name='L481'></a><a href='#L481'>481</a>
<a name='L482'></a><a href='#L482'>482</a>
<a name='L483'></a><a href='#L483'>483</a>
<a name='L484'></a><a href='#L484'>484</a>
<a name='L485'></a><a href='#L485'>485</a>
<a name='L486'></a><a href='#L486'>486</a>
<a name='L487'></a><a href='#L487'>487</a>
<a name='L488'></a><a href='#L488'>488</a>
<a name='L489'></a><a href='#L489'>489</a>
<a name='L490'></a><a href='#L490'>490</a>
<a name='L491'></a><a href='#L491'>491</a>
<a name='L492'></a><a href='#L492'>492</a>
<a name='L493'></a><a href='#L493'>493</a>
<a name='L494'></a><a href='#L494'>494</a>
<a name='L495'></a><a href='#L495'>495</a>
<a name='L496'></a><a href='#L496'>496</a>
<a name='L497'></a><a href='#L497'>497</a>
<a name='L498'></a><a href='#L498'>498</a>
<a name='L499'></a><a href='#L499'>499</a>
<a name='L500'></a><a href='#L500'>500</a>
<a name='L501'></a><a href='#L501'>501</a>
<a name='L502'></a><a href='#L502'>502</a>
<a name='L503'></a><a href='#L503'>503</a>
<a name='L504'></a><a href='#L504'>504</a>
<a name='L505'></a><a href='#L505'>505</a>
<a name='L506'></a><a href='#L506'>506</a>
<a name='L507'></a><a href='#L507'>507</a>
<a name='L508'></a><a href='#L508'>508</a>
<a name='L509'></a><a href='#L509'>509</a>
<a name='L510'></a><a href='#L510'>510</a>
<a name='L511'></a><a href='#L511'>511</a>
<a name='L512'></a><a href='#L512'>512</a>
<a name='L513'></a><a href='#L513'>513</a>
<a name='L514'></a><a href='#L514'>514</a>
<a name='L515'></a><a href='#L515'>515</a>
<a name='L516'></a><a href='#L516'>516</a>
<a name='L517'></a><a href='#L517'>517</a>
<a name='L518'></a><a href='#L518'>518</a>
<a name='L519'></a><a href='#L519'>519</a>
<a name='L520'></a><a href='#L520'>520</a>
<a name='L521'></a><a href='#L521'>521</a>
<a name='L522'></a><a href='#L522'>522</a>
<a name='L523'></a><a href='#L523'>523</a>
<a name='L524'></a><a href='#L524'>524</a>
<a name='L525'></a><a href='#L525'>525</a>
<a name='L526'></a><a href='#L526'>526</a>
<a name='L527'></a><a href='#L527'>527</a>
<a name='L528'></a><a href='#L528'>528</a>
<a name='L529'></a><a href='#L529'>529</a>
<a name='L530'></a><a href='#L530'>530</a>
<a name='L531'></a><a href='#L531'>531</a>
<a name='L532'></a><a href='#L532'>532</a>
<a name='L533'></a><a href='#L533'>533</a>
<a name='L534'></a><a href='#L534'>534</a>
<a name='L535'></a><a href='#L535'>535</a>
<a name='L536'></a><a href='#L536'>536</a>
<a name='L537'></a><a href='#L537'>537</a>
<a name='L538'></a><a href='#L538'>538</a>
<a name='L539'></a><a href='#L539'>539</a>
<a name='L540'></a><a href='#L540'>540</a>
<a name='L541'></a><a href='#L541'>541</a>
<a name='L542'></a><a href='#L542'>542</a>
<a name='L543'></a><a href='#L543'>543</a>
<a name='L544'></a><a href='#L544'>544</a>
<a name='L545'></a><a href='#L545'>545</a>
<a name='L546'></a><a href='#L546'>546</a>
<a name='L547'></a><a href='#L547'>547</a>
<a name='L548'></a><a href='#L548'>548</a>
<a name='L549'></a><a href='#L549'>549</a>
<a name='L550'></a><a href='#L550'>550</a>
<a name='L551'></a><a href='#L551'>551</a>
<a name='L552'></a><a href='#L552'>552</a>
<a name='L553'></a><a href='#L553'>553</a>
<a name='L554'></a><a href='#L554'>554</a>
<a name='L555'></a><a href='#L555'>555</a>
<a name='L556'></a><a href='#L556'>556</a>
<a name='L557'></a><a href='#L557'>557</a>
<a name='L558'></a><a href='#L558'>558</a>
<a name='L559'></a><a href='#L559'>559</a>
<a name='L560'></a><a href='#L560'>560</a>
<a name='L561'></a><a href='#L561'>561</a>
<a name='L562'></a><a href='#L562'>562</a>
<a name='L563'></a><a href='#L563'>563</a>
<a name='L564'></a><a href='#L564'>564</a>
<a name='L565'></a><a href='#L565'>565</a>
<a name='L566'></a><a href='#L566'>566</a>
<a name='L567'></a><a href='#L567'>567</a>
<a name='L568'></a><a href='#L568'>568</a>
<a name='L569'></a><a href='#L569'>569</a>
<a name='L570'></a><a href='#L570'>570</a>
<a name='L571'></a><a href='#L571'>571</a>
<a name='L572'></a><a href='#L572'>572</a>
<a name='L573'></a><a href='#L573'>573</a>
<a name='L574'></a><a href='#L574'>574</a>
<a name='L575'></a><a href='#L575'>575</a>
<a name='L576'></a><a href='#L576'>576</a>
<a name='L577'></a><a href='#L577'>577</a>
<a name='L578'></a><a href='#L578'>578</a>
<a name='L579'></a><a href='#L579'>579</a>
<a name='L580'></a><a href='#L580'>580</a>
<a name='L581'></a><a href='#L581'>581</a>
<a name='L582'></a><a href='#L582'>582</a>
<a name='L583'></a><a href='#L583'>583</a>
<a name='L584'></a><a href='#L584'>584</a>
<a name='L585'></a><a href='#L585'>585</a>
<a name='L586'></a><a href='#L586'>586</a>
<a name='L587'></a><a href='#L587'>587</a>
<a name='L588'></a><a href='#L588'>588</a>
<a name='L589'></a><a href='#L589'>589</a>
<a name='L590'></a><a href='#L590'>590</a>
<a name='L591'></a><a href='#L591'>591</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Crown Agent (SIA Monitoring System)
 * 
 * Runs every 10 minutes to monitor agent health and intervene on issues.
 * The "Crown" oversees all agents and ensures smooth operation.
 */
&nbsp;
<span class="cstat-no" title="statement not covered" >import { query, run, getOne } from '../db/index.js';</span>
<span class="cstat-no" title="statement not covered" >import * as agents from '../db/agents.js';</span>
import * as sessions from '../db/sessions.js';
<span class="cstat-no" title="statement not covered" >import * as tasks from '../db/tasks.js';</span>
<span class="cstat-no" title="statement not covered" >import { events as dbEvents } from '../db/events.js';</span>
<span class="cstat-no" title="statement not covered" >import { notifyAdmin, sendToBot } from '../telegram/index.js';</span>
<span class="cstat-no" title="statement not covered" >import { spawnAgentSession, spawnWithPrompt } from '../spawner/index.js';</span>
&nbsp;
// Crown monitoring interval (10 minutes)
<span class="cstat-no" title="statement not covered" >const CROWN_INTERVAL_MS = 10 * 60 * 1000;</span>
&nbsp;
// Thresholds
<span class="cstat-no" title="statement not covered" >const STUCK_THRESHOLD_MS = 15 * 60 * 1000; // 15 min without heartbeat = stuck</span>
<span class="cstat-no" title="statement not covered" >const FAILURE_THRESHOLD = 3; // 3+ consecutive failures = problematic</span>
<span class="cstat-no" title="statement not covered" >const ERROR_RATE_THRESHOLD = 0.5; // 50%+ failure rate = concerning</span>
&nbsp;
interface AgentHealth {
  agentId: string;
  status: string;
  recentSessions: number;
  failedSessions: number;
  failureRate: number;
  lastHeartbeat: Date | null;
  timeSinceHeartbeat: number | null;
  currentTaskId: string | null;
  isStuck: boolean;
  consecutiveFailures: number;
}
&nbsp;
interface CrownReport {
  timestamp: Date;
  healthChecks: AgentHealth[];
  interventions: string[];
  alerts: string[];
}
&nbsp;
<span class="cstat-no" title="statement not covered" >let crownInterval: NodeJS.Timeout | null = null;</span>
<span class="cstat-no" title="statement not covered" >let lastReport: CrownReport | null = null;</span>
<span class="cstat-no" title="statement not covered" >let lastReportSentAt: number = 0;</span>
<span class="cstat-no" title="statement not covered" >const REPORT_RATE_LIMIT_MS = 60 * 60 * 1000; // Only send 1 report per hour max</span>
&nbsp;
/**
 * Start the Crown monitoring system
 */
<span class="cstat-no" title="statement not covered" >export function startCrown(): void {</span>
<span class="cstat-no" title="statement not covered" >  console.log(' Crown Agent (SIA Monitor) starting...');</span>
  
  // Run initial check after 1 minute
<span class="cstat-no" title="statement not covered" >  setTimeout(() =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    runCrownCheck().catch(err =&gt; console.error('Crown check error:', err));</span>
<span class="cstat-no" title="statement not covered" >  }, 60 * 1000);</span>
  
  // Then run every 10 minutes
<span class="cstat-no" title="statement not covered" >  crownInterval = setInterval(() =&gt; {</span>
<span class="cstat-no" title="statement not covered" >    runCrownCheck().catch(err =&gt; console.error('Crown check error:', err));</span>
<span class="cstat-no" title="statement not covered" >  }, CROWN_INTERVAL_MS);</span>
  
<span class="cstat-no" title="statement not covered" >  console.log(' Crown Agent scheduled (every 10 minutes)');</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Stop the Crown monitoring system
 */
<span class="cstat-no" title="statement not covered" >export function stopCrown(): void {</span>
<span class="cstat-no" title="statement not covered" >  if (crownInterval) {</span>
<span class="cstat-no" title="statement not covered" >    clearInterval(crownInterval);</span>
<span class="cstat-no" title="statement not covered" >    crownInterval = null;</span>
<span class="cstat-no" title="statement not covered" >    console.log(' Crown Agent stopped');</span>
<span class="cstat-no" title="statement not covered" >  }</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Run a Crown health check
 */
<span class="cstat-no" title="statement not covered" >export async function runCrownCheck(): Promise&lt;CrownReport&gt; {</span>
<span class="cstat-no" title="statement not covered" >  console.log(' Crown check starting...');</span>
  
<span class="cstat-no" title="statement not covered" >  const report: CrownReport = {</span>
<span class="cstat-no" title="statement not covered" >    timestamp: new Date(),</span>
<span class="cstat-no" title="statement not covered" >    healthChecks: [],</span>
<span class="cstat-no" title="statement not covered" >    interventions: [],</span>
<span class="cstat-no" title="statement not covered" >    alerts: [],</span>
<span class="cstat-no" title="statement not covered" >  };</span>
  
<span class="cstat-no" title="statement not covered" >  try {</span>
    // 1. Check agent health
<span class="cstat-no" title="statement not covered" >    const healthChecks = await checkAgentHealth();</span>
<span class="cstat-no" title="statement not covered" >    report.healthChecks = healthChecks;</span>
    
    // 2. Analyze and intervene
<span class="cstat-no" title="statement not covered" >    for (const health of healthChecks) {</span>
      // Check for stuck agents
<span class="cstat-no" title="statement not covered" >      if (health.isStuck &amp;&amp; health.status === 'working') {</span>
<span class="cstat-no" title="statement not covered" >        const intervention = await handleStuckAgent(health);</span>
<span class="cstat-no" title="statement not covered" >        if (intervention) report.interventions.push(intervention);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
      
      // Check for high failure rate
<span class="cstat-no" title="statement not covered" >      if (health.failureRate &gt;= ERROR_RATE_THRESHOLD &amp;&amp; health.recentSessions &gt;= 3) {</span>
<span class="cstat-no" title="statement not covered" >        report.alerts.push(` ${health.agentId} has ${Math.round(health.failureRate * 100)}% failure rate`);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
      
      // Check for consecutive failures
<span class="cstat-no" title="statement not covered" >      if (health.consecutiveFailures &gt;= FAILURE_THRESHOLD) {</span>
<span class="cstat-no" title="statement not covered" >        const intervention = await handleRepeatedFailures(health);</span>
<span class="cstat-no" title="statement not covered" >        if (intervention) report.interventions.push(intervention);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // 3. Check for orphaned tasks (in_progress but no agent working on them)
<span class="cstat-no" title="statement not covered" >    const orphanedTasks = await checkOrphanedTasks();</span>
<span class="cstat-no" title="statement not covered" >    for (const task of orphanedTasks) {</span>
<span class="cstat-no" title="statement not covered" >      const intervention = await handleOrphanedTask(task);</span>
<span class="cstat-no" title="statement not covered" >      if (intervention) report.interventions.push(intervention);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // 4. Check for task queue health and loop detection
<span class="cstat-no" title="statement not covered" >    const queueHealth = await checkTaskQueue();</span>
<span class="cstat-no" title="statement not covered" >    if (queueHealth.alerts.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      report.alerts.push(...queueHealth.alerts);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >    if (queueHealth.interventions.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      report.interventions.push(...queueHealth.interventions);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // 5. Run SIA deep analysis if issues detected
    // DISABLED: SIA spawning consumes too many tokens. Just log alerts for now.
    // Re-enabled SIA analysis for blocked task resolution
<span class="cstat-no" title="statement not covered" >    if (report.interventions.length &gt; 0 || report.alerts.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      const siaResult = await runSIAAnalysis(healthChecks);</span>
<span class="cstat-no" title="statement not covered" >      if (siaResult) {</span>
<span class="cstat-no" title="statement not covered" >        report.interventions.push(` SIA: ${siaResult}`);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >    if (report.alerts.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      console.log(` Crown alerts: ${report.alerts.length} issues`);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // 6. Report if there are issues
    // DISABLED: Crown reports are spamming Telegram with alerts for disabled agents
    // if (report.interventions.length &gt; 0 || report.alerts.length &gt; 0) {
    //   await sendCrownReport(report);
    // }
    
<span class="cstat-no" title="statement not covered" >    lastReport = report;</span>
<span class="cstat-no" title="statement not covered" >    console.log(` Crown check complete: ${report.interventions.length} interventions, ${report.alerts.length} alerts`);</span>
    
<span class="cstat-no" title="statement not covered" >  } catch (error) {</span>
<span class="cstat-no" title="statement not covered" >    console.error(' Crown check error:', error);</span>
<span class="cstat-no" title="statement not covered" >    report.alerts.push(`Crown check failed: ${error}`);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  return report;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Check health of all agents
 */
<span class="cstat-no" title="statement not covered" >async function checkAgentHealth(): Promise&lt;AgentHealth[]&gt; {</span>
<span class="cstat-no" title="statement not covered" >  const allAgents = agents.getAgents();</span>
<span class="cstat-no" title="statement not covered" >  const now = Date.now();</span>
<span class="cstat-no" title="statement not covered" >  const healthChecks: AgentHealth[] = [];</span>
  
<span class="cstat-no" title="statement not covered" >  for (const agent of allAgents) {</span>
    // Skip orchestrator and sia_agent (they don't do tasks)
<span class="cstat-no" title="statement not covered" >    if (agent.id === 'orchestrator' || agent.id === 'sia_agent') continue;</span>
    
    // Get recent sessions (last 2 hours)
<span class="cstat-no" title="statement not covered" >    const recentSessions = query&lt;{ status: string }&gt;(</span>
<span class="cstat-no" title="statement not covered" >      `SELECT status FROM agent_sessions </span>
       WHERE agent_id = ? AND started_at &gt; datetime('now', '-2 hours')`,
<span class="cstat-no" title="statement not covered" >      [agent.id]</span>
<span class="cstat-no" title="statement not covered" >    );</span>
    
<span class="cstat-no" title="statement not covered" >    const failedSessions = recentSessions.filter(s =&gt; s.status === 'failed').length;</span>
<span class="cstat-no" title="statement not covered" >    const failureRate = recentSessions.length &gt; 0 ? failedSessions / recentSessions.length : 0;</span>
    
    // Get consecutive failures
<span class="cstat-no" title="statement not covered" >    const recentResults = query&lt;{ status: string }&gt;(</span>
<span class="cstat-no" title="statement not covered" >      `SELECT status FROM agent_sessions </span>
       WHERE agent_id = ? ORDER BY started_at DESC LIMIT 5`,
<span class="cstat-no" title="statement not covered" >      [agent.id]</span>
<span class="cstat-no" title="statement not covered" >    );</span>
    
<span class="cstat-no" title="statement not covered" >    let consecutiveFailures = 0;</span>
<span class="cstat-no" title="statement not covered" >    for (const r of recentResults) {</span>
<span class="cstat-no" title="statement not covered" >      if (r.status === 'failed') consecutiveFailures++;</span>
<span class="cstat-no" title="statement not covered" >      else break;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // Calculate time since last heartbeat
<span class="cstat-no" title="statement not covered" >    const lastHeartbeat = agent.last_heartbeat ? new Date(agent.last_heartbeat) : null;</span>
<span class="cstat-no" title="statement not covered" >    const timeSinceHeartbeat = lastHeartbeat ? now - lastHeartbeat.getTime() : null;</span>
    
    // Check if agent has a recent session (started in last 5 min)
<span class="cstat-no" title="statement not covered" >    const recentActiveSession = getOne&lt;{ started_at: string }&gt;(</span>
<span class="cstat-no" title="statement not covered" >      `SELECT started_at FROM agent_sessions </span>
       WHERE agent_id = ? AND status = 'running' 
       AND started_at &gt; datetime('now', '-5 minutes')
       LIMIT 1`,
<span class="cstat-no" title="statement not covered" >      [agent.id]</span>
<span class="cstat-no" title="statement not covered" >    );</span>
    
    // Only mark as stuck if:
    // 1. Has been working with no heartbeat for STUCK_THRESHOLD_MS AND
    // 2. Does NOT have a recently started session (grace period for new sessions)
<span class="cstat-no" title="statement not covered" >    const hasGracePeriod = !!recentActiveSession;</span>
<span class="cstat-no" title="statement not covered" >    const isStuck = !hasGracePeriod &amp;&amp; </span>
<span class="cstat-no" title="statement not covered" >      timeSinceHeartbeat !== null &amp;&amp; </span>
<span class="cstat-no" title="statement not covered" >      timeSinceHeartbeat &gt; STUCK_THRESHOLD_MS;</span>
    
<span class="cstat-no" title="statement not covered" >    healthChecks.push({</span>
<span class="cstat-no" title="statement not covered" >      agentId: agent.id,</span>
<span class="cstat-no" title="statement not covered" >      status: agent.status,</span>
<span class="cstat-no" title="statement not covered" >      recentSessions: recentSessions.length,</span>
<span class="cstat-no" title="statement not covered" >      failedSessions,</span>
<span class="cstat-no" title="statement not covered" >      failureRate,</span>
<span class="cstat-no" title="statement not covered" >      lastHeartbeat,</span>
<span class="cstat-no" title="statement not covered" >      timeSinceHeartbeat,</span>
<span class="cstat-no" title="statement not covered" >      currentTaskId: agent.current_task_id,</span>
<span class="cstat-no" title="statement not covered" >      isStuck,</span>
<span class="cstat-no" title="statement not covered" >      consecutiveFailures,</span>
<span class="cstat-no" title="statement not covered" >    });</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  return healthChecks;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Handle a stuck agent
 */
<span class="cstat-no" title="statement not covered" >async function handleStuckAgent(health: AgentHealth): Promise&lt;string | null&gt; {</span>
<span class="cstat-no" title="statement not covered" >  console.log(` Intervening: ${health.agentId} is stuck`);</span>
  
  // Reset agent to idle
<span class="cstat-no" title="statement not covered" >  agents.updateAgentStatus(health.agentId, 'idle', null, null);</span>
  
  // If there was a task, mark it as pending for retry
<span class="cstat-no" title="statement not covered" >  if (health.currentTaskId) {</span>
<span class="cstat-no" title="statement not covered" >    const task = tasks.getTask(health.currentTaskId);</span>
<span class="cstat-no" title="statement not covered" >    if (task &amp;&amp; task.status === 'in_progress') {</span>
<span class="cstat-no" title="statement not covered" >      tasks.updateTask(health.currentTaskId, { status: 'pending' });</span>
      // Increment retry count via raw SQL
<span class="cstat-no" title="statement not covered" >      run(`UPDATE tasks SET retry_count = COALESCE(retry_count, 0) + 1 WHERE id = ?`, [health.currentTaskId]);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  const msg = ` Reset stuck agent ${health.agentId} (no heartbeat for ${Math.round((health.timeSinceHeartbeat || 0) / 60000)} min)`;</span>
<span class="cstat-no" title="statement not covered" >  console.log(` ${msg}`);</span>
<span class="cstat-no" title="statement not covered" >  return msg;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Handle repeated failures
 */
<span class="cstat-no" title="statement not covered" >async function handleRepeatedFailures(health: AgentHealth): Promise&lt;string | null&gt; {</span>
<span class="cstat-no" title="statement not covered" >  console.log(` Intervening: ${health.agentId} has ${health.consecutiveFailures} consecutive failures`);</span>
  
  // Reset agent to idle (will pick up different task)
<span class="cstat-no" title="statement not covered" >  if (health.status === 'working' || health.status === 'stuck') {</span>
<span class="cstat-no" title="statement not covered" >    agents.updateAgentStatus(health.agentId, 'idle', null, null);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
  // If same task keeps failing, mark it for review
<span class="cstat-no" title="statement not covered" >  if (health.currentTaskId) {</span>
<span class="cstat-no" title="statement not covered" >    const task = tasks.getTask(health.currentTaskId);</span>
<span class="cstat-no" title="statement not covered" >    if (task &amp;&amp; task.retry_count &amp;&amp; task.retry_count &gt;= 3) {</span>
<span class="cstat-no" title="statement not covered" >      tasks.updateTask(health.currentTaskId, { status: 'blocked' });</span>
      // Emit retry exhaustion event for dashboard alerts
<span class="cstat-no" title="statement not covered" >      dbEvents.retryExhausted(health.currentTaskId, task.title || task.display_id, task.retry_count);</span>
<span class="cstat-no" title="statement not covered" >      return ` Blocked task ${task.display_id} after ${task.retry_count} retries - needs human review`;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  return ` ${health.agentId} reset after ${health.consecutiveFailures} consecutive failures`;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Check for orphaned tasks
 */
<span class="cstat-no" title="statement not covered" >async function checkOrphanedTasks(): Promise&lt;tasks.Task[]&gt; {</span>
  // Tasks marked as in_progress but no agent is working on them
<span class="cstat-no" title="statement not covered" >  const inProgressTasks = tasks.getTasks({ status: 'in_progress' });</span>
<span class="cstat-no" title="statement not covered" >  const workingAgents = agents.getWorkingAgents();</span>
<span class="cstat-no" title="statement not covered" >  const activeTaskIds = new Set(workingAgents.map(a =&gt; a.current_task_id).filter(Boolean));</span>
  
<span class="cstat-no" title="statement not covered" >  return inProgressTasks.filter(t =&gt; !activeTaskIds.has(t.id));</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Handle orphaned task
 */
<span class="cstat-no" title="statement not covered" >async function handleOrphanedTask(task: tasks.Task): Promise&lt;string | null&gt; {</span>
<span class="cstat-no" title="statement not covered" >  console.log(` Found orphaned task: ${task.display_id}`);</span>
  
  // Reset to pending for reassignment
<span class="cstat-no" title="statement not covered" >  tasks.updateTask(task.id, { status: 'pending' });</span>
  
<span class="cstat-no" title="statement not covered" >  return ` Reset orphaned task ${task.display_id} to pending`;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Check task queue health and detect loops
 */
<span class="cstat-no" title="statement not covered" >async function checkTaskQueue(): Promise&lt;{ alerts: string[]; interventions: string[] }&gt; {</span>
<span class="cstat-no" title="statement not covered" >  const alerts: string[] = [];</span>
<span class="cstat-no" title="statement not covered" >  const interventions: string[] = [];</span>
  
<span class="cstat-no" title="statement not covered" >  const pending = tasks.getTasks({ status: 'pending' });</span>
<span class="cstat-no" title="statement not covered" >  const blocked = tasks.getTasks({ status: 'blocked' });</span>
<span class="cstat-no" title="statement not covered" >  const failed = tasks.getTasks({ status: 'failed' });</span>
  
  // Alert if too many blocked tasks
<span class="cstat-no" title="statement not covered" >  if (blocked.length &gt;= 5) {</span>
<span class="cstat-no" title="statement not covered" >    alerts.push(` ${blocked.length} tasks blocked - may need human intervention`);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
  // Alert if no progress (many pending, none in progress)
<span class="cstat-no" title="statement not covered" >  const inProgress = tasks.getTasks({ status: 'in_progress' });</span>
<span class="cstat-no" title="statement not covered" >  const idleAgents = agents.getIdleAgents();</span>
<span class="cstat-no" title="statement not covered" >  if (pending.length &gt; 10 &amp;&amp; inProgress.length === 0 &amp;&amp; idleAgents.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >    alerts.push(` ${pending.length} pending tasks but no progress - check agent assignment`);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
  // LOOP DETECTION: Find tasks with rapid re-assignment (3+ sessions in 10 min)
<span class="cstat-no" title="statement not covered" >  const rapidReassign = query&lt;{ task_id: string; session_count: number; agents: string }&gt;(`</span>
    SELECT task_id, COUNT(*) as session_count, GROUP_CONCAT(agent_id) as agents
    FROM agent_sessions 
    WHERE started_at &gt; datetime('now', '-10 minutes')
    GROUP BY task_id
    HAVING session_count &gt;= 3
    ORDER BY session_count DESC
<span class="cstat-no" title="statement not covered" >  `);</span>
  
<span class="cstat-no" title="statement not covered" >  for (const loop of rapidReassign) {</span>
<span class="cstat-no" title="statement not covered" >    const task = tasks.getTask(loop.task_id);</span>
<span class="cstat-no" title="statement not covered" >    if (!task) continue;</span>
    
    // Only block if task is still pending or in_progress
<span class="cstat-no" title="statement not covered" >    if (task.status === 'pending' || task.status === 'in_progress') {</span>
      // Block the task to stop the loop
<span class="cstat-no" title="statement not covered" >      tasks.updateTask(loop.task_id, { status: 'blocked' });</span>
<span class="cstat-no" title="statement not covered" >      run(`UPDATE tasks SET retry_count = COALESCE(retry_count, 0) + 1 WHERE id = ?`, [loop.task_id]);</span>
      
<span class="cstat-no" title="statement not covered" >      interventions.push(` LOOP DETECTED: ${task.display_id} had ${loop.session_count} sessions in 10 min - BLOCKED`);</span>
<span class="cstat-no" title="statement not covered" >      console.log(` Loop detected: ${task.display_id} - ${loop.session_count} sessions by ${loop.agents}`);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  return { alerts, interventions };</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Run SIA deep analysis on stuck/failing patterns
 * Spawns SIA agent to analyze codebase and recommend fixes
 */
<span class="cstat-no" title="statement not covered" >async function runSIAAnalysis(healthChecks: AgentHealth[]): Promise&lt;string | null&gt; {</span>
  // Only run if there are significant issues
<span class="cstat-no" title="statement not covered" >  const stuckCount = healthChecks.filter(h =&gt; h.isStuck).length;</span>
<span class="cstat-no" title="statement not covered" >  const highFailureCount = healthChecks.filter(h =&gt; h.failureRate &gt;= ERROR_RATE_THRESHOLD).length;</span>
  
<span class="cstat-no" title="statement not covered" >  if (stuckCount === 0 &amp;&amp; highFailureCount === 0) {</span>
<span class="cstat-no" title="statement not covered" >    return null;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  console.log(' Triggering SIA deep analysis...');</span>
  
  // Build analysis prompt
<span class="cstat-no" title="statement not covered" >  const analysisPrompt = `You are SIA (Crown Agent) performing a system health analysis.</span>
&nbsp;
## Current Issues Detected:
<span class="cstat-no" title="statement not covered" >${healthChecks.filter(h =&gt; h.isStuck || h.failureRate &gt;= 0.3).map(h =&gt; `</span>
<span class="cstat-no" title="statement not covered" >- ${h.agentId}: ${h.isStuck ? 'STUCK' : ''} ${h.failureRate &gt;= 0.3 ? `${Math.round(h.failureRate * 100)}% failure rate` : ''} (${h.consecutiveFailures} consecutive failures)</span>
<span class="cstat-no" title="statement not covered" >`).join('')}</span>
&nbsp;
## Your Tasks:
1. Check agent_sessions table for recent failure patterns
2. Check tasks table for blocked or repeatedly failing tasks
3. Analyze if there are code issues preventing agent success
4. Check if agents are properly configured
&nbsp;
## Codebase to analyze:
- parent-harness/orchestrator/src/ - harness code
- parent-harness/data/harness.db - database
&nbsp;
## Actions you can take:
1. Reset stuck agents: Run SQL to set status='idle', current_task_id=NULL
2. Reset stuck tasks: Run SQL to set status='pending' 
3. Block problematic tasks: Set status='blocked' for tasks with 5+ retries
4. Report findings for human review
&nbsp;
Analyze and fix what you can. Report what needs human intervention.
Output: TASK_COMPLETE: &lt;summary of actions taken&gt;`;
&nbsp;
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    console.log(' SIA Analysis starting...');</span>
<span class="cstat-no" title="statement not covered" >    console.log(' Issues:', {</span>
<span class="cstat-no" title="statement not covered" >      stuck: stuckCount,</span>
<span class="cstat-no" title="statement not covered" >      highFailure: highFailureCount,</span>
<span class="cstat-no" title="statement not covered" >      agents: healthChecks.filter(h =&gt; h.isStuck || h.failureRate &gt;= 0.3).map(h =&gt; h.agentId)</span>
<span class="cstat-no" title="statement not covered" >    });</span>
    
    // Auto-fix: Reset any agents that are stuck
<span class="cstat-no" title="statement not covered" >    let fixedAgents = 0;</span>
<span class="cstat-no" title="statement not covered" >    for (const health of healthChecks) {</span>
<span class="cstat-no" title="statement not covered" >      if (health.isStuck &amp;&amp; health.status === 'working') {</span>
<span class="cstat-no" title="statement not covered" >        agents.updateAgentStatus(health.agentId, 'idle', null, null);</span>
<span class="cstat-no" title="statement not covered" >        run(`UPDATE agents SET last_heartbeat = datetime('now') WHERE id = ?`, [health.agentId]);</span>
<span class="cstat-no" title="statement not covered" >        console.log(` SIA Auto-fix: Reset ${health.agentId} to idle with fresh heartbeat`);</span>
<span class="cstat-no" title="statement not covered" >        fixedAgents++;</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // Find blocked tasks that need investigation
<span class="cstat-no" title="statement not covered" >    const blockedTasks = query&lt;{ </span>
      id: string; 
      title: string; 
      display_id: string; 
      description: string;
      retry_count: number;
      pass_criteria: string;
<span class="cstat-no" title="statement not covered" >    }&gt;(`</span>
      SELECT id, title, display_id, description, retry_count, pass_criteria 
      FROM tasks 
      WHERE status = 'blocked' 
      ORDER BY retry_count DESC 
      LIMIT 3
<span class="cstat-no" title="statement not covered" >    `);</span>
    
    // If there are blocked tasks, spawn SIA to investigate and fix the MOST blocked one
<span class="cstat-no" title="statement not covered" >    if (blockedTasks.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      const targetTask = blockedTasks[0]; // Pick the most retried task</span>
      
      // Get recent failure logs for this task
<span class="cstat-no" title="statement not covered" >      const recentSessions = query&lt;{ agent_id: string; status: string; output: string }&gt;(`</span>
        SELECT agent_id, status, output 
        FROM agent_sessions 
        WHERE task_id = ? AND status = 'failed'
        ORDER BY started_at DESC 
        LIMIT 3
<span class="cstat-no" title="statement not covered" >      `, [targetTask.id]);</span>
      
<span class="cstat-no" title="statement not covered" >      const errorSummary = recentSessions</span>
<span class="cstat-no" title="statement not covered" >        .map(s =&gt; `Agent ${s.agent_id}: ${s.output?.slice(0, 500) || 'No output logged'}`)</span>
<span class="cstat-no" title="statement not covered" >        .join('\n\n');</span>
      
<span class="cstat-no" title="statement not covered" >      const siaPrompt = `You are SIA, the autonomous debugging agent.</span>
&nbsp;
## YOUR MISSION
<span class="cstat-no" title="statement not covered" >A task has failed ${targetTask.retry_count} times. You must investigate WHY and FIX the underlying issue.</span>
&nbsp;
## BLOCKED TASK
<span class="cstat-no" title="statement not covered" >- ID: ${targetTask.display_id}</span>
<span class="cstat-no" title="statement not covered" >- Title: ${targetTask.title}</span>
<span class="cstat-no" title="statement not covered" >- Description: ${targetTask.description || 'No description'}</span>
<span class="cstat-no" title="statement not covered" >- Pass Criteria: ${targetTask.pass_criteria || 'Not specified'}</span>
<span class="cstat-no" title="statement not covered" >- Retry Count: ${targetTask.retry_count}</span>
&nbsp;
## RECENT ERRORS
<span class="cstat-no" title="statement not covered" >${errorSummary || 'No error details available'}</span>
&nbsp;
## YOUR APPROACH
1. Read the codebase to understand what the task was trying to do
2. Look at the error patterns - what's actually failing?
3. Is there a bug in the code preventing success?
4. Is the task specification unclear or impossible?
5. FIX the underlying issue if it's a code bug
6. If unfixable, explain EXACTLY what needs human intervention
&nbsp;
## ACTIONS YOU CAN TAKE
- Read files to understand the codebase
- Write/Edit files to fix bugs
- Run commands to test fixes
- If you fix the issue, update the harness DB to unblock the task:
<span class="cstat-no" title="statement not covered" >  sqlite3 /home/ned-atanasovski/Documents/Idea_Incubator/Idea_Incubator/parent-harness/data/harness.db "UPDATE tasks SET status = 'pending', retry_count = 0 WHERE display_id = '${targetTask.display_id}'"</span>
&nbsp;
## OUTPUT
TASK_COMPLETE: Fixed &lt;issue&gt; by &lt;action&gt;
OR
TASK_COMPLETE: Cannot auto-fix because &lt;specific reason&gt; - requires &lt;specific human action&gt;
&nbsp;
Do NOT just say "needs human intervention" - be SPECIFIC about what the issue is and what needs to be done.`;
&nbsp;
<span class="cstat-no" title="statement not covered" >      console.log(` SIA investigating blocked task: ${targetTask.display_id}`);</span>
      
      // Spawn SIA agent to investigate (use sonnet for quality debugging)
<span class="cstat-no" title="statement not covered" >      const result = await spawnWithPrompt(siaPrompt, {</span>
<span class="cstat-no" title="statement not covered" >        model: 'sonnet',</span>
<span class="cstat-no" title="statement not covered" >        timeout: 300,</span>
<span class="cstat-no" title="statement not covered" >        label: 'sia_debug',</span>
<span class="cstat-no" title="statement not covered" >      });</span>
      
<span class="cstat-no" title="statement not covered" >      if (result.success) {</span>
<span class="cstat-no" title="statement not covered" >        console.log(` SIA investigation complete: ${result.output?.slice(0, 200)}`);</span>
        // Send result to Telegram
<span class="cstat-no" title="statement not covered" >        const summary = result.output?.match(/TASK_COMPLETE:\s*(.+)/s)?.[1]?.slice(0, 500) || 'Investigation complete';</span>
<span class="cstat-no" title="statement not covered" >        await sendToBot('sia', ` &lt;b&gt;SIA Investigation: ${targetTask.display_id}&lt;/b&gt;\n\n${summary}`);</span>
<span class="cstat-no" title="statement not covered" >        return `SIA investigated ${targetTask.display_id}: ${summary.slice(0, 100)}`;</span>
<span class="cstat-no" title="statement not covered" >      } else {</span>
<span class="cstat-no" title="statement not covered" >        console.log(` SIA investigation failed: ${result.error}`);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
    // Also block tasks with too many retries
<span class="cstat-no" title="statement not covered" >    const tasksToBlock = query&lt;{ id: string; title: string; display_id: string; retry_count: number }&gt;(`</span>
      SELECT id, title, display_id, retry_count FROM tasks 
      WHERE status = 'pending' AND retry_count &gt;= 5
<span class="cstat-no" title="statement not covered" >    `);</span>
    
<span class="cstat-no" title="statement not covered" >    if (tasksToBlock.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      run(`UPDATE tasks SET status = 'blocked' WHERE status = 'pending' AND retry_count &gt;= 5`);</span>
<span class="cstat-no" title="statement not covered" >      for (const task of tasksToBlock) {</span>
<span class="cstat-no" title="statement not covered" >        dbEvents.retryExhausted(task.id, task.title || task.display_id, task.retry_count);</span>
<span class="cstat-no" title="statement not covered" >      }</span>
<span class="cstat-no" title="statement not covered" >      console.log(` SIA Auto-fix: Blocked ${tasksToBlock.length} tasks with 5+ retries`);</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    
<span class="cstat-no" title="statement not covered" >    return `SIA analyzed ${healthChecks.length} agents, fixed ${fixedAgents} stuck agents, blocked ${tasksToBlock.length} problematic tasks`;</span>
    
<span class="cstat-no" title="statement not covered" >  } catch (error) {</span>
<span class="cstat-no" title="statement not covered" >    console.error(' SIA analysis error:', error);</span>
<span class="cstat-no" title="statement not covered" >    return null;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Send Crown report to Telegram (rate limited to 1 per hour)
 */
<span class="cstat-no" title="statement not covered" >async function sendCrownReport(report: CrownReport): Promise&lt;void&gt; {</span>
<span class="cstat-no" title="statement not covered" >  const now = Date.now();</span>
<span class="cstat-no" title="statement not covered" >  const timeSinceLastReport = now - lastReportSentAt;</span>
  
  // Rate limit: only send 1 report per hour
<span class="cstat-no" title="statement not covered" >  if (timeSinceLastReport &lt; REPORT_RATE_LIMIT_MS) {</span>
<span class="cstat-no" title="statement not covered" >    const minutesRemaining = Math.ceil((REPORT_RATE_LIMIT_MS - timeSinceLastReport) / 60000);</span>
<span class="cstat-no" title="statement not covered" >    console.log(` Crown report rate limited (next report in ${minutesRemaining}min)`);</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  let message = ` &lt;b&gt;CROWN AGENT REPORT&lt;/b&gt;\n`;</span>
<span class="cstat-no" title="statement not covered" >  message += `&lt;code&gt;${report.timestamp.toISOString()}&lt;/code&gt;\n\n`;</span>
  
<span class="cstat-no" title="statement not covered" >  if (report.interventions.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >    message += `&lt;b&gt;Interventions:&lt;/b&gt;\n`;</span>
<span class="cstat-no" title="statement not covered" >    for (const i of report.interventions) {</span>
<span class="cstat-no" title="statement not covered" >      message += ` ${i}\n`;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >    message += `\n`;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
<span class="cstat-no" title="statement not covered" >  if (report.alerts.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >    message += `&lt;b&gt;Alerts:&lt;/b&gt;\n`;</span>
<span class="cstat-no" title="statement not covered" >    for (const a of report.alerts) {</span>
<span class="cstat-no" title="statement not covered" >      message += ` ${a}\n`;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  
  // Send via SIA bot (Crown identity)
<span class="cstat-no" title="statement not covered" >  await sendToBot('sia', message);</span>
<span class="cstat-no" title="statement not covered" >  lastReportSentAt = now;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Get last Crown report
 */
<span class="cstat-no" title="statement not covered" >export function getLastReport(): CrownReport | null {</span>
<span class="cstat-no" title="statement not covered" >  return lastReport;</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
/**
 * Force a Crown check (for API)
 */
<span class="cstat-no" title="statement not covered" >export async function triggerCrownCheck(): Promise&lt;CrownReport&gt; {</span>
<span class="cstat-no" title="statement not covered" >  return runCrownCheck();</span>
<span class="cstat-no" title="statement not covered" >}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >export default {</span>
<span class="cstat-no" title="statement not covered" >  startCrown,</span>
<span class="cstat-no" title="statement not covered" >  stopCrown,</span>
<span class="cstat-no" title="statement not covered" >  runCrownCheck,</span>
<span class="cstat-no" title="statement not covered" >  getLastReport,</span>
<span class="cstat-no" title="statement not covered" >  triggerCrownCheck,</span>
<span class="cstat-no" title="statement not covered" >};</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-08T16:16:49.621Z
            </div>
        <script src="../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../sorter.js"></script>
        <script src="../../block-navigation.js"></script>
    </body>
</html>
    