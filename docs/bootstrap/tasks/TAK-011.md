# TAK-011: TestGenerator Service

---

## Metadata

| Field | Value |
|-------|-------|
| **Phase** | 3 - Core Services |
| **Depends On** | TAK-007 |
| **Blocks** | TAK-016 (TaskAgent), TAK-047 (AcceptanceGenerator) |
| **Priority** | P1 |
| **Owner** | Build Agent |

---

## Summary

Implement the TestGenerator class that generates API test scaffolds and UI test scaffolds with Puppeteer steps from task descriptions.

---

## Requirements

1. **TestGenerator class**:
   - Generate API test scaffolds from task description
   - Generate UI test scaffolds with Puppeteer steps
   - Infer endpoints and selectors from context
   - Include setup/teardown templates

2. **Methods**:
   - `generateTests(task: Task): Promise<GeneratedTests>`
   - `generateAPITests(task): APITestCase[]`
   - `generateUITests(task): UITestCase[]`
   - `inferEndpoints(description): string[]`
   - `inferSelectors(description): string[]`

---

## Pass Criteria

**PASS** when ALL of the following are true:

| # | Criterion | How to Verify |
|---|-----------|---------------|
| 1 | File exists | `test -f server/services/task-agent/test-generator.ts` returns 0 |
| 2 | Exports TestGenerator | `grep -q "export class TestGenerator" server/services/task-agent/test-generator.ts` returns 0 |
| 3 | Has generateAPITests | `grep -q "generateAPITests" server/services/task-agent/test-generator.ts` returns 0 |
| 4 | Has generateUITests | `grep -q "generateUITests" server/services/task-agent/test-generator.ts` returns 0 |
| 5 | TypeScript compiles | `npx tsc --noEmit server/services/task-agent/test-generator.ts` returns 0 |

**FAIL** if any criterion is not met.

---

## Output Files

```
server/services/task-agent/
└── test-generator.ts
```

---

## Gotchas

- UI tests use MCP Puppeteer format
- API tests should be self-contained
- Include realistic test data examples

---

## Validation

```bash
npx tsc --noEmit server/services/task-agent/test-generator.ts
npm test -- --grep "test-generator"
```

---

## Next Steps

After completing: Implement LifecycleManager (TAK-012).
