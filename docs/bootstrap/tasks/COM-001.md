# COM-001: Multi-Bot Architecture & BotFather Setup

---

## Metadata

| Field          | Value                  |
| -------------- | ---------------------- |
| **Phase**      | 0 - Communication Core |
| **Depends On** | None                   |
| **Blocks**     | COM-002, COM-003       |
| **Priority**   | P1                     |
| **Owner**      | Human                  |

---

## Summary

Create Telegram bots for each agent type via BotFather. Each agent gets its own bot for clear communication separation.

---

## Context

### Why One Bot Per Agent?

| Benefit       | Description                                     |
| ------------- | ----------------------------------------------- |
| **Clarity**   | Know instantly which agent is talking           |
| **Control**   | Mute noisy agents without missing critical ones |
| **Threading** | Each bot has separate conversation history      |
| **Debugging** | Isolate issues to specific agents               |

### Bot Roster

| Agent             | Bot Username           | Display Name      |
| ----------------- | ---------------------- | ----------------- |
| Monitoring Agent  | @vibe_monitor_bot      | Vibe Monitor      |
| Orchestrator      | @vibe_orchestrator_bot | Vibe Orchestrator |
| Spec Agent        | @vibe_spec_bot         | Vibe Spec         |
| Build Agent       | @vibe_build_bot        | Vibe Build        |
| Validation Agent  | @vibe_validation_bot   | Vibe Validation   |
| SIA               | @vibe_sia_bot          | Vibe SIA          |
| System (fallback) | @vibe_system_bot       | Vibe System       |

---

## Requirements

1. **Create 7 Telegram Bots**:
   - Message @BotFather on Telegram
   - Use `/newbot` command for each
   - Follow naming convention above
   - Save each bot token securely

2. **Bot Configuration**:
   - Set description via `/setdescription`
   - Set about text via `/setabouttext`
   - Set profile picture via `/setuserpic` (optional)
   - Enable inline mode via `/setinline` (for buttons)

3. **Token Storage**:
   - Store in `.env` file
   - Never commit to git
   - Use naming convention: `TELEGRAM_BOT_TOKEN_{AGENT}`

---

## Pass Criteria

**PASS** when ALL of the following are true:

| #   | Criterion              | How to Verify                                |
| --- | ---------------------- | -------------------------------------------- |
| 1   | 7 bots created         | Each bot responds to /start                  |
| 2   | Tokens stored          | `.env` has all 7 `TELEGRAM_BOT_TOKEN_*` vars |
| 3   | Bots have descriptions | BotFather shows description for each         |
| 4   | .env.example updated   | Shows all token placeholders                 |

**FAIL** if any criterion is not met.

---

## Output Files

```
.env                  ← Add bot tokens (DO NOT COMMIT)
.env.example          ← Add token placeholders
```

---

## Manual Steps

### Step 1: Create Each Bot

Open Telegram, search for @BotFather, then for each bot:

```
You: /newbot
BotFather: Alright, a new bot. How are we going to call it?
You: Vibe Monitor
BotFather: Good. Now let's choose a username...
You: vibe_monitor_bot
BotFather: Done! ... Use this token to access the HTTP API:
           123456789:ABCdefGHIjklMNOpqrsTUVwxyz
```

Repeat for all 7 bots.

### Step 2: Set Bot Descriptions

For each bot:

```
/setdescription
Select bot: @vibe_monitor_bot
Description: Monitoring Agent for Vibe Platform. Watches all agents, detects issues, requests approvals for actions.
```

### Step 3: Add Tokens to .env

```bash
# .env
TELEGRAM_BOT_TOKEN_MONITOR=123456789:ABCdef...
TELEGRAM_BOT_TOKEN_ORCHESTRATOR=234567890:BCDef...
TELEGRAM_BOT_TOKEN_SPEC=345678901:CDEfg...
TELEGRAM_BOT_TOKEN_BUILD=456789012:DEFgh...
TELEGRAM_BOT_TOKEN_VALIDATION=567890123:EFGhi...
TELEGRAM_BOT_TOKEN_SIA=678901234:FGHij...
TELEGRAM_BOT_TOKEN_SYSTEM=789012345:GHIjk...
```

### Step 4: Update .env.example

```bash
# .env.example
# Telegram Bot Tokens (from @BotFather)
TELEGRAM_BOT_TOKEN_MONITOR=
TELEGRAM_BOT_TOKEN_ORCHESTRATOR=
TELEGRAM_BOT_TOKEN_SPEC=
TELEGRAM_BOT_TOKEN_BUILD=
TELEGRAM_BOT_TOKEN_VALIDATION=
TELEGRAM_BOT_TOKEN_SIA=
TELEGRAM_BOT_TOKEN_SYSTEM=

# Primary user for notifications
TELEGRAM_PRIMARY_PHONE=+61431366620
```

---

## Validation

```bash
# Test each bot responds
curl "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN_MONITOR}/getMe"
# Should return: {"ok":true,"result":{"id":...,"is_bot":true,"first_name":"Vibe Monitor",...}}
```

---

## Next Steps

After completing: Implement bot registry (COM-002) and chat ID linking (COM-003).
