# TAK-030: LifecycleManager Unit Tests

---

## Metadata

| Field          | Value               |
| -------------- | ------------------- |
| **Phase**      | 8 - Unit Tests      |
| **Depends On** | TAK-012             |
| **Blocks**     | TAK-038 (E2E Tests) |
| **Priority**   | P1                  |
| **Owner**      | Build Agent         |

---

## Summary

Create unit tests for the LifecycleManager service covering valid state transitions, invalid transition rejection, and history recording.

---

## Requirements

1. **Test Cases**:
   - Test valid state transitions
   - Test invalid transition rejection
   - Test history recording
   - Test event emission

---

## Pass Criteria

**PASS** when ALL of the following are true:

| #   | Criterion            | How to Verify                                                                    |
| --- | -------------------- | -------------------------------------------------------------------------------- |
| 1   | File exists          | `test -f tests/unit/task-agent/lifecycle-manager.test.ts` returns 0              |
| 2   | Has transition tests | `grep -q "transition" tests/unit/task-agent/lifecycle-manager.test.ts` returns 0 |
| 3   | Has history tests    | `grep -q "history" tests/unit/task-agent/lifecycle-manager.test.ts` returns 0    |
| 4   | Tests pass           | `npm test -- --grep "lifecycle"` passes                                          |

**FAIL** if any criterion is not met.

---

## Output Files

```
tests/unit/task-agent/
└── lifecycle-manager.test.ts
```
