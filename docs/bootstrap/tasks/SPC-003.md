# SPC-003: Brief Parser

---

## Metadata

| Field | Value |
|-------|-------|
| **Phase** | 1 - Spec Agent |
| **Depends On** | SPC-001 |
| **Blocks** | SPC-004 |
| **Priority** | P1 |
| **Owner** | Build Agent (after Phase 1) |

---

## Summary

Implement parser that extracts structured data from brief.md files: problem statement, solution, MVP scope, and constraints.

---

## Requirements

1. **Markdown Parsing**:
   - Parse markdown headings and sections
   - Extract YAML frontmatter if present
   - Handle bullet lists and nested content

2. **Data Extraction**:
   - Problem statement
   - Proposed solution
   - MVP scope
   - Technical constraints
   - Success criteria

3. **Validation**:
   - Verify required sections exist
   - Flag missing or unclear information
   - Generate questions for ambiguity

---

## Pass Criteria

**PASS** when ALL of the following are true:

| # | Criterion | How to Verify |
|---|-----------|---------------|
| 1 | File exists | `test -f agents/specification/brief-parser.ts` returns 0 |
| 2 | Exports BriefParser | `grep -q "export class BriefParser" agents/specification/brief-parser.ts` returns 0 |
| 3 | Has parse method | `grep -q "parse(" agents/specification/brief-parser.ts` returns 0 |
| 4 | Has ParsedBrief interface | `grep -q "interface ParsedBrief" agents/specification/brief-parser.ts` returns 0 |
| 5 | Extracts problem | `grep -q "problem" agents/specification/brief-parser.ts` returns 0 |
| 6 | Extracts solution | `grep -q "solution" agents/specification/brief-parser.ts` returns 0 |
| 7 | TypeScript compiles | `npx tsc --noEmit agents/specification/brief-parser.ts` returns 0 |
| 8 | Unit tests pass | `npm test -- --grep "brief-parser"` passes |

**FAIL** if any criterion is not met.

---

## Output Files

```
agents/specification/
└── brief-parser.ts
```

---

## Code Template

```typescript
// agents/specification/brief-parser.ts

export interface ParsedBrief {
  title: string;
  problem: string;
  solution: string;
  mvpScope: string;
  constraints: string[];
  successCriteria: string[];
  rawContent: string;
}

export interface ParseResult {
  brief: ParsedBrief;
  valid: boolean;
  missing: string[];
  questions: string[];
}

export class BriefParser {
  parse(content: string): ParseResult {
    // Extract sections from markdown
  }

  private extractSection(content: string, heading: string): string {
    // Find content under specific heading
  }

  private validateBrief(brief: ParsedBrief): { valid: boolean; missing: string[] } {
    // Check required fields present
  }
}
```

---

## Validation

```bash
npx tsc --noEmit agents/specification/brief-parser.ts
npm test -- --grep "brief-parser"
```
