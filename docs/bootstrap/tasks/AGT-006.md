# AGT-006: Document Triple-Build Verification

---

## Metadata

| Field          | Value               |
| -------------- | ------------------- |
| **Phase**      | 0 - Agent Bootstrap |
| **Depends On** | AGT-003             |
| **Blocks**     | VER-002             |
| **Priority**   | P2                  |
| **Owner**      | Human               |

---

## Summary

Document the triple-build verification process borrowed from compiler bootstrapping. This ensures agents can reliably reproduce identical output.

---

## Requirements

1. **Process Definition**:
   - Build 1: Human builds agent from spec
   - Build 2: Agent rebuilds itself from same spec
   - Build 3: Rebuilt agent rebuilds itself again
   - Compare: Builds 2 and 3 must match exactly

2. **Comparison Methods**:
   - File-by-file diff
   - Semantic equivalence checks
   - Acceptable differences (timestamps, etc.)

3. **Automation**:
   - Script to run triple-build
   - Script to compare outputs
   - CI integration plan

---

## Pass Criteria

**PASS** when ALL of the following are true:

| #   | Criterion              | How to Verify                                                      |
| --- | ---------------------- | ------------------------------------------------------------------ |
| 1   | Doc exists             | `test -f docs/bootstrap/TRIPLE-BUILD.md` returns 0                 |
| 2   | Defines 3 builds       | `grep -c "Build [123]" docs/bootstrap/TRIPLE-BUILD.md` >= 3        |
| 3   | Has comparison section | `grep -q "## Comparison" docs/bootstrap/TRIPLE-BUILD.md` returns 0 |
| 4   | Has automation section | `grep -q "## Automation" docs/bootstrap/TRIPLE-BUILD.md` returns 0 |
| 5   | Has acceptable diffs   | `grep -q "acceptable" docs/bootstrap/TRIPLE-BUILD.md` returns 0    |

**FAIL** if any criterion is not met.

---

## Output Files

```
docs/bootstrap/
└── TRIPLE-BUILD.md
```

---

## Validation

```bash
# Check document exists with required sections
test -f docs/bootstrap/TRIPLE-BUILD.md && \
  grep -q "Build 1" docs/bootstrap/TRIPLE-BUILD.md && \
  grep -q "Build 2" docs/bootstrap/TRIPLE-BUILD.md && \
  grep -q "Build 3" docs/bootstrap/TRIPLE-BUILD.md && \
  echo "OK"
```

---

## Next Steps

After completing: Implement triple-build scripts in VER-002.
