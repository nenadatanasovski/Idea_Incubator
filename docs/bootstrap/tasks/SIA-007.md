# SIA-007: CLAUDE.md Updater

---

## Metadata

| Field          | Value                      |
| -------------- | -------------------------- |
| **Phase**      | 9 - Self-Improvement Agent |
| **Depends On** | SIA-006                    |
| **Blocks**     | None                       |
| **Priority**   | P3                         |
| **Owner**      | Human + Claude Code        |

---

## Summary

Implement the CLAUDE.md updater that proposes updates to project conventions based on high-confidence knowledge entries. Requires human approval before changes.

---

## Context

### Update Criteria

| Criterion            | Threshold |
| -------------------- | --------- |
| **Confidence**       | > 0.9     |
| **Occurrences**      | > 5       |
| **Prevention count** | > 3       |
| **Age**              | > 7 days  |

---

## Requirements

1. **Candidate Selection**:
   - Find high-confidence entries
   - Check promotion criteria
   - Generate proposal

2. **Proposal Generation**:
   - Draft CLAUDE.md addition
   - Include rationale
   - Show evidence

3. **Approval Flow**:
   - Create proposal record
   - Notify human
   - Apply on approval

---

## Pass Criteria

| #   | Criterion           | How to Verify           |
| --- | ------------------- | ----------------------- |
| 1   | Candidates found    | Query high-conf entries |
| 2   | Proposals generated | Check proposals table   |
| 3   | Approval required   | Verify no auto-update   |

---

## Output Files

```
agents/sia/claude-md-updater.ts
```

---

## Code Template

```typescript
interface ClaudeMdProposal {
  id: string;
  section: string;
  content: string;
  rationale: string;
  evidence: string[];
  sourceEntry: string;
  status: "pending" | "approved" | "rejected";
}

export async function proposeClaudeMdUpdate(
  entry: KnowledgeEntry,
): Promise<ClaudeMdProposal | null> {
  // Check promotion criteria
  // Generate proposal text
  // Create proposal record
}
```
