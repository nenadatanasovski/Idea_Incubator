# SPC-002: Template Renderer

---

## Metadata

| Field          | Value                       |
| -------------- | --------------------------- |
| **Phase**      | 1 - Spec Agent              |
| **Depends On** | SPC-001                     |
| **Blocks**     | SPC-005                     |
| **Priority**   | P1                          |
| **Owner**      | Build Agent (after Phase 1) |

---

## Summary

Implement template renderer that fills spec and task templates with generated content while preserving structure.

---

## Requirements

1. **Template Loading**:
   - Load spec.md template
   - Load tasks.md template
   - Parse template sections and placeholders

2. **Rendering**:
   - Fill placeholders with generated content
   - Preserve markdown structure
   - Handle conditional sections

3. **Validation**:
   - Verify all required sections filled
   - Check YAML frontmatter valid
   - Ensure no unfilled placeholders remain

---

## Pass Criteria

**PASS** when ALL of the following are true:

| #   | Criterion                | How to Verify                                                                                 |
| --- | ------------------------ | --------------------------------------------------------------------------------------------- |
| 1   | File exists              | `test -f agents/specification/template-renderer.ts` returns 0                                 |
| 2   | Exports TemplateRenderer | `grep -q "export class TemplateRenderer" agents/specification/template-renderer.ts` returns 0 |
| 3   | Has render method        | `grep -q "render(" agents/specification/template-renderer.ts` returns 0                       |
| 4   | Has validate method      | `grep -q "validate(" agents/specification/template-renderer.ts` returns 0                     |
| 5   | TypeScript compiles      | `npx tsc --noEmit agents/specification/template-renderer.ts` returns 0                        |
| 6   | Unit tests pass          | `npm test -- --grep "template-renderer"` passes                                               |

**FAIL** if any criterion is not met.

---

## Output Files

```
agents/specification/
└── template-renderer.ts
```

---

## Code Template

```typescript
// agents/specification/template-renderer.ts

export interface TemplateSection {
  name: string;
  content: string;
  required: boolean;
}

export interface RenderResult {
  content: string;
  valid: boolean;
  errors: string[];
}

export class TemplateRenderer {
  private template: string;

  constructor(templatePath: string) {
    // Load template
  }

  render(data: Record<string, unknown>): RenderResult {
    // Fill placeholders, preserve structure
  }

  validate(rendered: string): { valid: boolean; errors: string[] } {
    // Check all required sections present
  }
}
```

---

## Validation

```bash
npx tsc --noEmit agents/specification/template-renderer.ts
npm test -- --grep "template-renderer"
```
