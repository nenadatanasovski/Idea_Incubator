# TAK-038: Task Agent E2E Full Flow Test

---

## Metadata

| Field          | Value                      |
| -------------- | -------------------------- |
| **Phase**      | 11 - E2E Integration Tests |
| **Depends On** | TAK-016, TAK-017           |
| **Blocks**     | None                       |
| **Priority**   | P1                         |
| **Owner**      | Build Agent                |

---

## Summary

Create end-to-end integration test for complete task lifecycle via API: create, validate, execute, complete.

---

## Requirements

1. **Test Flow**:
   - Create task via API
   - Validate task
   - Validate that blocked tasks cannot start
   - Add dependencies and verify blocking
   - Complete task and verify unblocking
   - Test completion detection

---

## Pass Criteria

**PASS** when ALL of the following are true:

| #   | Criterion           | How to Verify                                                                     |
| --- | ------------------- | --------------------------------------------------------------------------------- |
| 1   | File exists         | `test -f tests/e2e/task-agent-full-flow.ts` returns 0                             |
| 2   | Has create test     | `grep -q "create.*task\|POST.*tasks" tests/e2e/task-agent-full-flow.ts` returns 0 |
| 3   | Has validation test | `grep -q "validat" tests/e2e/task-agent-full-flow.ts` returns 0                   |
| 4   | Has dependency test | `grep -q "depend" tests/e2e/task-agent-full-flow.ts` returns 0                    |
| 5   | Tests pass          | `npm run test:e2e -- --filter "task-agent"` passes                                |

**FAIL** if any criterion is not met.

---

## Output Files

```
tests/e2e/
└── task-agent-full-flow.ts
```
